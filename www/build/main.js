webpackJsonp([1],{106:function(n,t,e){"use strict";e.d(t,"a",function(){return c});var o=e(83),i=e(0),a=e(32),r=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r},s=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},c=function(){function n(n,t,e){this.navCtrl=n,this.navParams=t,this.restSvc=e,this.markers=[],this.nearRestaurants=[],this.radius=10,this.lat=19.440057053713137,this.lng=-99.12704709742486,this.numRestaurants=0,this.averageRating=0,this.standarDeviation=0,this.inputRatingMax=0,this.inputRatingMin=0}return n.prototype.ionViewDidLoad=function(){this.startMap()},n.prototype.startMap=function(){var n=this,t={center:new google.maps.LatLng(this.lat,this.lng),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.gmapElement.nativeElement,t),this.initMarker(this.lat,this.lng),google.maps.event.addListener(this.map,"click",function(t){n.clickMap(t.latLng.lat(),t.latLng.lng()),n.lat=t.latLng.lat(),n.lng=t.latLng.lng(),n.marker.setMap(null),n.initMarker(t.latLng.lat(),t.latLng.lng())})},n.prototype.clickMap=function(n,t){var e=this;this.clearMarkers(),this.nearRestaurants.length=0;new google.maps.LatLng(n,t);var o=0,i=0,a=[];a.length=0,this.restSvc.getData().subscribe(function(r){r.forEach(function(r){e.getDist(n,t,r.address.location.lat,r.address.location.lng)<=1e3*e.radius&&(e.nearRestaurants.push(r),o+=r.rating,i++,a.push(r.rating),e.addMarker(r.address.location.lat,r.address.location.lng))}),e.standarDeviation=e.getStandarDeviation(a,o),e.numRestaurants=i,e.averageRating=o/e.numRestaurants}),this.setMapOnAll()},n.prototype.initMarker=function(n,t){var e=new google.maps.LatLng(n,t);this.marker=new google.maps.Marker({position:e,map:this.map,title:"Referencia",icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"}),this.marker.setMap(this.map)},n.prototype.addMarker=function(n,t){var e=new google.maps.LatLng(n,t),o=new google.maps.Marker({position:e,map:this.map,title:"Restaurantes"});this.markers.push(o)},n.prototype.setMapOnAll=function(){for(var n=0;n<this.markers.length;n++)this.markers[n].setMap(this.map)},n.prototype.clearMarkers=function(){for(var n=0;n<this.markers.length;n++)this.markers[n].setMap(null);this.markers=[]},n.prototype.getStandarDeviation=function(n,t){var e=t/n.length,o=0;return n.forEach(function(n){o+=Math.pow(n-e,2)}),Math.sqrt(o/n.length)},n.prototype.getDist=function(n,t,e,o){n=3.141592*n/180,t=3.141592*t/180,e=3.141592*e/180,o=3.141592*o/180;var i=6378100,a=i*Math.cos(n),r=i*Math.sin(n),s=a*Math.cos(t),c=a*Math.sin(t),l=i*Math.cos(e),u=i*Math.sin(e),d=(s*(l*Math.cos(o))+c*(l*Math.sin(o))+r*u)/(i*i);return i*Math.acos(d)},n.prototype.getRecomendation=function(n,t){var e,o,i=this;new google.maps.LatLng(this.lat,this.lng);this.restSvc.getData().subscribe(function(a){a.forEach(function(a){var r=i.getDist(i.lat,i.lng,a.address.location.lat,a.address.location.lng);r<=1e3*i.radius&&a.rating>n&&a.rating<=t&&(o?o<r&&(o=r,e=a):(o=r,e=a))}),i.bestRest=e,console.log(i.bestRest)})},r([Object(i._8)("gmap"),s("design:type",Object)],n.prototype,"gmapElement",void 0),n=r([Object(i.m)({selector:"page-bonus2",template:'<ion-header>\n  <ion-navbar color="primary">\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>Bonus 2 and Bonus 3</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <h2>Write or click a map point and enter radius to see restaurants near</h2>\n  <ion-grid fixed>\n    <ion-row>\n\n      <ion-col>\n        <ion-item>\n          <ion-label color="primary" floating>Enter Lat</ion-label>\n          <ion-input type="number" [(ngModel)]="lat"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col>\n        <ion-item>\n          <ion-label color="primary" floating>Enter Lng</ion-label>\n          <ion-input type="number" [(ngModel)]="lng"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col>\n        <ion-item>\n          <ion-label color="primary" floating>Enter radius (Km)</ion-label>\n          <ion-input type="number" [(ngModel)]="radius"></ion-input>\n        </ion-item>\n\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col col-6>\n        <button fixed ion-button color="danger" round (click)="startMap(); clickMap(lat, lng)">\n          View Restaurants\n        </button>\n      </ion-col>\n    </ion-row>\n\n  </ion-grid>\n\n\n  \x3c!-- Start Data --\x3e\n  <ion-grid fixed>\n    <ion-row>\n      <ion-col>\n        <ion-card color="indigo">\n          <ion-card-header>\n            <ion-icon name="globe"></ion-icon>\n            Count of all the restaurants within radius\n          </ion-card-header>\n          <ion-card-content>\n            <h2>{{numRestaurants}}</h2>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col>\n        <ion-card color="indigo">\n          <ion-card-header>\n            <ion-icon name="star"></ion-icon>\n            Average Rating\n          </ion-card-header>\n          <ion-card-content>\n            <h2>{{averageRating.toFixed(3)}}</h2>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col>\n        <ion-card color="indigo">\n          <ion-card-header>\n            <ion-icon name="md-analytics"></ion-icon>\n            Standard deviation of rating\n          </ion-card-header>\n          <ion-card-content>\n            <h2>{{standarDeviation}}</h2>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-card color="blue">\n        <ion-card-header>\n          <ion-icon name="happy"></ion-icon>\n          The nearest restaurants in the zone given a point in a map\n        </ion-card-header>\n        <p>Enter a Rate</p>\n        <ion-row>\n          <ion-col col-md-2>\n            <ion-item>\n              <ion-label>Max</ion-label>\n              <ion-input type="number" [(ngModel)]="inputRatingMax"></ion-input>\n            </ion-item>\n          </ion-col>\n          <ion-col col-md-2>\n            <ion-item>\n              <ion-label>Min</ion-label>\n              <ion-input type="number" [(ngModel)]="inputRatingMin"></ion-input>\n            </ion-item>\n          </ion-col>\n          <ion-col col-md-2>\n            <button fixed ion-button color="danger" round (click)="getRecomendation(inputRatingMin,inputRatingMax)">\n              Find\n            </button>\n          </ion-col>\n        </ion-row>\n        <ion-card-content *ngIf="bestRest">\n          <ion-list>\n            <h2>\n              <b>Name</b> {{bestRest.name}}\n            </h2>\n            <h2>\n              <b>Rating</b> {{bestRest.rating}}\n            </h2>\n            <h2>\n              <b>City</b> {{bestRest.address.city}}\n            </h2>\n            <h2>\n              <b>State</b> {{bestRest.address.state}}\n            </h2>\n            <h2>\n              <b>Street</b> {{bestRest.address.street}}\n            </h2>\n            <h2>\n              <b>Contact</b> {{bestRest.contact.phone}}\n            </h2>\n          </ion-list>\n\n        </ion-card-content>\n      </ion-card>\n    </ion-row>\n    <ion-card>\n      <ion-navbar color="primary">\n        <ion-card-title style="color: #fff;">\n          Restaurants within radius\n        </ion-card-title>\n      </ion-navbar>\n      <div #gmap class="map-responsive"></div>\n    </ion-card>\n  </ion-grid>\n</ion-content>'}),s("design:paramtypes",[a.f,a.g,o.a])],n)}()},117:function(n,t){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=117},159:function(n,t,e){function o(n){var t=i[n];return t?e.e(t[1]).then(function(){return e(t[0])}):Promise.reject(new Error("Cannot find module '"+n+"'."))}var i={"../pages/bonus2/bonus2.module":[285,0]};o.keys=function(){return Object.keys(i)},o.id=159,n.exports=o},204:function(n,t,e){"use strict";e.d(t,"a",function(){return u});var o=e(83),i=e(0),a=e(32),r=e(279),s=(e.n(r),e(205)),c=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r},l=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},u=function(){function n(n,t){this.navCtrl=n,this.restaurantsDataSvc=t,this.Arr=Array,this.isOrder="null",this.isRating="null"}return n.prototype.ionViewDidLoad=function(){this.getDataRestaurants()},n.prototype.getDataRestaurants=function(){this.restaurants$=this.restaurantsDataSvc.getData()},n.prototype.orderByNameAsc=function(){var n=this;this.isOrder="Dsd",this.isRating="null",this.restaurants$.subscribe(function(t){t.forEach(function(n){n.name=n.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"")});var e=t.sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0});n.restaurants$=Object(r.from)([e])})},n.prototype.orderByNameDsd=function(){var n=this;this.isOrder="Asc",this.isRating="null",this.restaurants$.subscribe(function(t){t.forEach(function(n){n.name=n.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"")});var e=t.sort(function(n,t){return t.name>n.name?1:n.name>t.name?-1:0});n.restaurants$=Object(r.from)([e])})},n.prototype.orderByRatingAsc=function(){var n=this;this.isOrder="null",this.isRating="Dsd",this.restaurants$.subscribe(function(t){t.forEach(function(n){n.name=n.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"")});var e=t.sort(function(n,t){return n.rating>t.rating?1:t.rating>n.rating?-1:0});n.restaurants$=Object(r.from)([e])})},n.prototype.orderByRatingDsd=function(){var n=this;this.isOrder="null",this.isRating="Asc",this.restaurants$.subscribe(function(t){t.forEach(function(n){n.name=n.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"")});var e=t.sort(function(n,t){return t.rating>n.rating?1:n.rating>t.rating?-1:0});n.restaurants$=Object(r.from)([e])})},n.prototype.getLocation=function(n){this.navCtrl.push(s.a,n)},n=c([Object(i.m)({selector:"page-home",template:'<ion-header>\n  <ion-navbar color="primary">\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>Restaurants</ion-title>\n  </ion-navbar>\n  <ion-toolbar color="primary" no-border-top>\n    <button *ngIf="isOrder === \'Asc\'" (click)="orderByNameAsc()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="md-arrow-down"></ion-icon> Order by Name\n    </button>\n    <button *ngIf="isOrder === \'Dsd\'" (click)="orderByNameDsd()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="md-arrow-up"></ion-icon> Order by Name\n    </button>\n    <button *ngIf="isOrder === \'null\'" (click)="orderByNameAsc()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="ios-funnel"></ion-icon> Order by Name\n    </button>\n    <button *ngIf="isRating === \'Asc\'" (click)="orderByRatingAsc()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="md-arrow-up"></ion-icon> Order by Rating\n    </button>\n    <button *ngIf="isRating === \'Dsd\'" (click)="orderByRatingDsd()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="md-arrow-down"></ion-icon> Order by Rating\n    </button>\n    <button *ngIf="isRating === \'null\'" (click)="orderByRatingAsc()" ion-button item-end icon-left round color="danger">\n      <ion-icon name="ios-funnel"></ion-icon> Order by Rating\n    </button>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content padding>\n  <h2 text-center>Select one restaurant for more details</h2>\n  <p text-center>Bonus 2 and 3 on the slide menu at the left top </p>\n  <ion-grid fixed>\n    <ion-list text-wrap>\n      <button ion-item  *ngFor="let restaurant of restaurants$ | async" (click)="getLocation(restaurant)">\n        <ion-avatar item-start>\n          <ion-icon name="restaurant"></ion-icon>\n        </ion-avatar>\n        <h2>{{restaurant.name}}</h2>\n        <p>{{restaurant.address.city}}</p>\n        <span *ngIf="restaurant.rating > 0" item-end>\n          <ion-icon color="primary" *ngFor="let starts of Arr(restaurant.rating).fill(1)" name="star">\n          </ion-icon>\n        </span>\n\n\n\n        <span *ngIf="restaurant.rating === 0" item-end>\n          <b ion-text text-center>No rating</b>\n          <ion-icon name="thumbs-down"></ion-icon>\n        </span>\n\n      </button>\n    </ion-list>\n  </ion-grid>\n</ion-content>'}),l("design:paramtypes",[a.f,o.a])],n)}()},205:function(n,t,e){"use strict";e.d(t,"a",function(){return s});var o=e(0),i=e(32),a=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},s=function(){function n(n,t){this.navCtrl=n,this.navParams=t,this.restaurant=t.data}return n.prototype.ionViewDidLoad=function(){var n=this,t=new google.maps.LatLng(this.restaurant.address.location.lat,this.restaurant.address.location.lng),e={center:new google.maps.LatLng(this.restaurant.address.location.lat,this.restaurant.address.location.lng),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.gmapElement.nativeElement,e),google.maps.event.addListenerOnce(this.map,"idle",function(){new google.maps.Marker({position:t,map:n.map,title:"Hello World!"})})},a([Object(o._8)("gmap"),r("design:type",Object)],n.prototype,"gmapElement",void 0),n=a([Object(o.m)({selector:"page-list",template:'<ion-header>\n  <ion-navbar color="primary">\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>Details</ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-grid fixed>\n    <ion-card>\n      <ion-navbar color="primary">\n        <ion-card-title style="color: #fff;">\n          {{restaurant.name}} \n        </ion-card-title>\n      </ion-navbar>\n      <ion-card-content>\n        <ion-list>\n          <h3 ion-item>\n            <b>Name:</b> {{restaurant.name}}</h3>\n          <h3 ion-item>\n            <b>Site:</b> {{restaurant.contact.site}}</h3>\n          <h3 ion-item>\n            <b>Phone:</b> {{restaurant.contact.phone}}</h3>\n          <h3 ion-item>\n            <b>Email:</b> {{restaurant.contact.email}}</h3>\n          <h3 ion-item>\n            <b>City:</b> {{restaurant.address.city}}</h3>\n          <h3 ion-item>\n            <b>State:</b> {{restaurant.address.state}}</h3>\n          <h3 ion-item>\n            <b>Street:</b> {{restaurant.address.street}}</h3>\n\n        </ion-list>\n\n      </ion-card-content>\n    </ion-card>\n    <ion-card>\n      <ion-navbar color="primary">\n        <ion-card-title style="color: #fff;">\n          Geographic Location\n        </ion-card-title>\n      </ion-navbar>\n      <div #gmap class="map-responsive"></div>\n    </ion-card>\n\n\n  </ion-grid>\n</ion-content>'}),r("design:paramtypes",[i.f,i.g])],n)}()},206:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e(207),i=e(223);Object(o.a)().bootstrapModule(i.a)},223:function(n,t,e){"use strict";e.d(t,"a",function(){return m});var o=e(30),i=e(0),a=e(32),r=e(160),s=e(270),c=e(204),l=e(205),u=e(200),d=e(203),p=e(83),f=e(106),g=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r},m=function(){function n(){}return n=g([Object(i.I)({declarations:[s.a,c.a,l.a,f.a],imports:[o.a,a.c.forRoot(s.a,{},{links:[{loadChildren:"../pages/bonus2/bonus2.module#Bonus2PageModule",name:"Bonus2Page",segment:"bonus2",priority:"low",defaultHistory:[]}]}),r.b],bootstrap:[a.a],entryComponents:[s.a,c.a,l.a,f.a],providers:[u.a,d.a,{provide:i.u,useClass:a.b},p.a]})],n)}()},270:function(n,t,e){"use strict";e.d(t,"a",function(){return d});var o=e(0),i=e(32),a=e(200),r=e(203),s=e(204),c=e(106),l=this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r},u=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},d=function(){function n(n,t,e){this.platform=n,this.statusBar=t,this.splashScreen=e,this.rootPage=s.a,this.initializeApp(),this.pages=[{title:"Home",component:s.a},{title:"Bonus2",component:c.a}]}return n.prototype.initializeApp=function(){var n=this;this.platform.ready().then(function(){n.statusBar.styleDefault(),n.splashScreen.hide()})},n.prototype.openPage=function(n){this.nav.setRoot(n.component)},l([Object(o._8)(i.e),u("design:type",i.e)],n.prototype,"nav",void 0),n=l([Object(o.m)({template:'<ion-menu [content]="content">\n  <ion-header>\n    <ion-toolbar>\n      <ion-title>Menu</ion-title>\n    </ion-toolbar>\n  </ion-header>\n\n  <ion-content>\n    <ion-list>\n      <button menuClose ion-item *ngFor="let p of pages" (click)="openPage(p)">\n        {{p.title}}\n      </button>\n    </ion-list>\n  </ion-content>\n\n</ion-menu>\n\n\x3c!-- Disable swipe-to-go-back because it\'s poor UX to combine STGB with side menus --\x3e\n<ion-nav [root]="rootPage" #content swipeBackEnabled="false"></ion-nav>'}),u("design:paramtypes",[i.h,a.a,r.a])],n)}()},83:function(n,t,e){"use strict";e.d(t,"a",function(){return c});var o=e(160),i=e(0),a=e(252),r=(e.n(a),this&&this.__decorate||function(n,t,e,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,t,e,o);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(r=(a<3?i(r):a>3?i(t,e,r):i(t,e))||r);return a>3&&r&&Object.defineProperty(t,e,r),r}),s=this&&this.__metadata||function(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)},c=function(){function n(n){this.http=n,this.URL_INFO="https://s3-us-west-2.amazonaws.com/lgoveabucket/data_melp.json"}return n.prototype.getData=function(){return this.http.get(this.URL_INFO)},n=r([Object(i.A)(),s("design:paramtypes",[o.a])],n)}()}},[206]);