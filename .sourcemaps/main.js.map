{"version":3,"sources":["../../src/pages/bonus2/bonus2.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/home/home.ts","../../src/pages/list/list.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/restaurants-data/restaurants-data.ts"],"names":["Bonus2Page","navCtrl","navParams","restSvc","this","markers","nearRestaurants","radius","lat","lng","numRestaurants","averageRating","standarDeviation","inputRatingMax","inputRatingMin","prototype","ionViewDidLoad","startMap","_this","mapProp","center","google","maps","LatLng","zoom","mapTypeId","MapTypeId","ROADMAP","map","Map","gmapElement","nativeElement","initMarker","event","addListener","clickMap","latLng","marker","setMap","clearMarkers","length","sumRating","sumRest","arrRating","getData","subscribe","data","forEach","element","getDist","address","location","push","rating","addMarker","getStandarDeviation","setMapOnAll","myLatLng","Marker","position","title","icon","i","avr","sum","Math","pow","sqrt","lat1","lon1","lat2","lon2","r","rho1","cos","z1","sin","x1","y1","rho2","z2","cos_theta","acos","getRecomendation","rateMin","rateMax","restaurant","minDist","distance","bestRest","console","log","__decorate","Object","__WEBPACK_IMPORTED_MODULE_1__angular_core__","selector","template","__WEBPACK_IMPORTED_MODULE_2_ionic_angular__","__WEBPACK_IMPORTED_MODULE_0__providers_restaurants_data_restaurants_data__","webpackEmptyAsyncContext","req","Promise","resolve","then","Error","keys","module","exports","id","webpackAsyncContext","ids","__webpack_require__","e","reject","../pages/bonus2/bonus2.module","HomePage","restaurantsDataSvc","Arr","Array","isOrder","isRating","getDataRestaurants","restaurants$","orderByNameAsc","name","normalize","replace","dataOrderByName","sort","a","b","__WEBPACK_IMPORTED_MODULE_3_rxjs_observable_from__","orderByNameDsd","orderByRatingAsc","orderByRatingDsd","getLocation","item","__WEBPACK_IMPORTED_MODULE_4__list_list__","ListPage","addListenerOnce","__WEBPACK_IMPORTED_MODULE_0__angular_core__","__WEBPACK_IMPORTED_MODULE_1_ionic_angular__","__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__","bootstrapModule","__WEBPACK_IMPORTED_MODULE_1__app_module__","AppModule","declarations","__WEBPACK_IMPORTED_MODULE_4__app_component__","__WEBPACK_IMPORTED_MODULE_5__pages_home_home__","__WEBPACK_IMPORTED_MODULE_6__pages_list_list__","__WEBPACK_IMPORTED_MODULE_10__pages_bonus2_bonus2__","imports","__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__","forRoot","links","loadChildren","segment","priority","defaultHistory","__WEBPACK_IMPORTED_MODULE_3__angular_common_http__","bootstrap","entryComponents","providers","__WEBPACK_IMPORTED_MODULE_7__ionic_native_status_bar__","__WEBPACK_IMPORTED_MODULE_8__ionic_native_splash_screen__","provide","useClass","__WEBPACK_IMPORTED_MODULE_9__providers_restaurants_data_restaurants_data__","MyApp","platform","statusBar","splashScreen","rootPage","__WEBPACK_IMPORTED_MODULE_4__pages_home_home__","initializeApp","pages","component","__WEBPACK_IMPORTED_MODULE_5__pages_bonus2_bonus2__","ready","styleDefault","hide","openPage","page","nav","setRoot","__WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__","__WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__","RestaurantsDataProvider","http","URL_INFO","get","__WEBPACK_IMPORTED_MODULE_0__angular_common_http__"],"mappings":"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","sourcesContent":["import { RestaurantsInfo } from './../../models/restaurants-info';\nimport { RestaurantsDataProvider } from './../../providers/restaurants-data/restaurants-data';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { ViewChild } from '@angular/core';\n\n@IonicPage()\n@Component({\n  selector: 'page-bonus2',\n  templateUrl: 'bonus2.html'\n})\nexport class Bonus2Page {\n  @ViewChild('gmap') gmapElement: any;\n  // mapa\n  map: google.maps.Map;\n  // marcadores\n  markers: google.maps.Marker[] = [];\n  marker: google.maps.Marker;\n  // restaurantes cercanos\n  nearRestaurants: RestaurantsInfo[] = [];\n  radius = 10;\n  lat = 19.440057053713137;\n  lng = -99.12704709742486;\n  numRestaurants = 0;\n  averageRating = 0;\n  standarDeviation = 0;\n  //input rating\n  inputRatingMax = 0;\n  inputRatingMin = 0;\n  bestRest: RestaurantsInfo;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private restSvc: RestaurantsDataProvider\n  ) {}\n\n  ionViewDidLoad() {\n    // centrar mapa\n    this.startMap();\n  }\n  startMap() {\n    const myLatLng = new google.maps.LatLng(this.lat, this.lng);\n    // crear mapa\n    var mapProp = {\n      center: myLatLng,\n      zoom: 15,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    };\n    // Cargar mapa\n    this.map = new google.maps.Map(this.gmapElement.nativeElement, mapProp);\n    // crea marcador inicial\n    this.initMarker(this.lat, this.lng);\n    // ve eventos click\n    google.maps.event.addListener(this.map, 'click', event => {\n      this.clickMap(event.latLng.lat(), event.latLng.lng());\n      this.lat = event.latLng.lat();\n      this.lng = event.latLng.lng();\n      this.marker.setMap(null);\n      this.initMarker(event.latLng.lat(), event.latLng.lng());\n    });\n  }\n\n  // crea punto con click o referencia\n  clickMap(lat: number, lng: number) {\n    // limpia valores\n    this.clearMarkers();\n    this.nearRestaurants.length = 0;\n    // crea var\n    let myLatLng = new google.maps.LatLng(lat, lng);\n    let sumRating = 0;\n    let sumRest = 0;\n    let arrRating: number[] = [];\n    arrRating.length = 0;\n\n    // comparar  con lat lng api\n    this.restSvc.getData().subscribe(data => {\n      data.forEach(element => {\n        let distance = this.getDist(\n          lat,\n          lng,\n          element.address.location.lat,\n          element.address.location.lng\n        );\n        if (distance <= this.radius * 1000) {\n          this.nearRestaurants.push(element);\n          sumRating += element.rating;\n          sumRest++;\n          arrRating.push(element.rating);\n          this.addMarker(\n            element.address.location.lat,\n            element.address.location.lng\n          );\n        }\n      });\n      this.standarDeviation = this.getStandarDeviation(arrRating, sumRating);\n      this.numRestaurants = sumRest;\n      this.averageRating = sumRating / this.numRestaurants;\n    });\n    this.setMapOnAll();\n  }\n  // marcador inicial o de referencia\n  initMarker(lat: number, lng: number) {\n    const myLatLng = new google.maps.LatLng(lat, lng);\n    this.marker = new google.maps.Marker({\n      position: myLatLng,\n      map: this.map,\n      title: 'Referencia',\n      icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n    });\n    this.marker.setMap(this.map);\n  }\n  // agrega marcadores\n  addMarker(lat: number, lng: number) {\n    const myLatLng = new google.maps.LatLng(lat, lng);\n    const marker = new google.maps.Marker({\n      position: myLatLng,\n      map: this.map,\n      title: 'Restaurantes'\n    });\n    this.markers.push(marker);\n  }\n  // Seta en mapa\n  setMapOnAll() {\n    for (var i = 0; i < this.markers.length; i++) {\n      this.markers[i].setMap(this.map);\n    }\n  }\n  // Limpia marcadores\n  clearMarkers() {\n    for (var i = 0; i < this.markers.length; i++) {\n      this.markers[i].setMap(null);\n    }\n    this.markers = [];\n  }\n  getStandarDeviation(arrRating: Array<number>, sumRating: number): number {\n    const avr = sumRating / arrRating.length;\n    let sum = 0;\n    arrRating.forEach(element => {\n      sum += Math.pow(element - avr, 2);\n    });\n    return Math.sqrt(sum / arrRating.length);\n  }\n  // calcula distancia en metros\n  /**\n   *\n   * @param lat1\n   * @param lon1\n   * @param lat2\n   * @param lon2\n   */\n  getDist(lat1: number, lon1: number, lat2: number, lon2: number): number {\n    // Convert degrees to radians\n    lat1 = lat1 * 3.141592 / 180.0;\n    lon1 = lon1 * 3.141592 / 180.0;\n\n    lat2 = lat2 * 3.141592 / 180.0;\n    lon2 = lon2 * 3.141592 / 180.0;\n\n    // radius of earth in metres\n    const r = 6378100;\n\n    // P\n    var rho1 = r * Math.cos(lat1);\n    var z1 = r * Math.sin(lat1);\n    var x1 = rho1 * Math.cos(lon1);\n    var y1 = rho1 * Math.sin(lon1);\n    // Q\n    var rho2 = r * Math.cos(lat2);\n    var z2 = r * Math.sin(lat2);\n    var x2 = rho2 * Math.cos(lon2);\n    var y2 = rho2 * Math.sin(lon2);\n\n    // Dot product\n    var dot = x1 * x2 + y1 * y2 + z1 * z2;\n    var cos_theta = dot / (r * r);\n    var theta = Math.acos(cos_theta);\n\n    // Distance in Metres\n    var dist = r * theta;\n    return dist;\n  }\n\n  // bonus 3\n  getRecomendation(rateMin: number, rateMax: number ) {\n    \n    // crea var\n    let myLatLng = new google.maps.LatLng(this.lat, this.lng);\n    let restaurant: RestaurantsInfo;\n    let minDist: number;\n    this.restSvc.getData().subscribe(data => {\n      data.forEach(element => {\n        let distance = this.getDist(\n          this.lat,\n          this.lng,\n          element.address.location.lat,\n          element.address.location.lng\n        );\n        if (distance <= this.radius * 1000 && element.rating > rateMin && element.rating <= rateMax ) {\n          if (!minDist) {\n             minDist = distance;\n             restaurant = element;\n          } else if (minDist < distance) {\n            minDist = distance;\n            restaurant = element;\n          }\n        }\n      });\n    this.bestRest = restaurant;\n    console.log(this.bestRest)\n    });\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bonus2/bonus2.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 117;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 117\n// module chunks = 1","var map = {\n\t\"../pages/bonus2/bonus2.module\": [\n\t\t285,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 159;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 159\n// module chunks = 1","import { Observable } from 'rxjs/Observable';\nimport { RestaurantsInfo } from './../../models/restaurants-info';\nimport { RestaurantsDataProvider } from './../../providers/restaurants-data/restaurants-data';\nimport { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport { from } from 'rxjs/observable/from';\nimport { ListPage } from '../list/list';\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  restaurants$: Observable<RestaurantsInfo[]>;\n  Arr = Array;\n  isOrder = 'null';\n  isRating = 'null';\n  constructor(\n    public navCtrl: NavController,\n    public restaurantsDataSvc: RestaurantsDataProvider\n  ) {}\n  ionViewDidLoad() {\n    this.getDataRestaurants();\n  }\n  getDataRestaurants() {\n    this.restaurants$ = this.restaurantsDataSvc.getData();\n  }\n  orderByNameAsc() {\n    this.isOrder = 'Dsd';\n    this.isRating = 'null';\n    this.restaurants$.subscribe(data => {\n      data.forEach(element => {\n        element.name = element.name\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n      });\n      const dataOrderByName = data.sort(function(a, b) {\n        return a.name > b.name ? 1 : b.name > a.name ? -1 : 0;\n      });\n      this.restaurants$ = from([dataOrderByName]);\n    });\n  }\n  orderByNameDsd() {\n    this.isOrder = 'Asc';\n    this.isRating = 'null';\n    this.restaurants$.subscribe(data => {\n      data.forEach(element => {\n        element.name = element.name\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n      });\n      const dataOrderByName = data.sort(function(a, b) {\n        return b.name > a.name ? 1 : a.name > b.name ? -1 : 0;\n      });\n      this.restaurants$ = from([dataOrderByName]);\n    });\n  }\n  orderByRatingAsc() {\n    this.isOrder = 'null';\n    this.isRating = 'Dsd';\n    this.restaurants$.subscribe(data => {\n      data.forEach(element => {\n        element.name = element.name\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n      });\n      const dataOrderByName = data.sort(function(a, b) {\n        return a.rating > b.rating ? 1 : b.rating > a.rating ? -1 : 0;\n      });\n      this.restaurants$ = from([dataOrderByName]);\n    });\n  }\n  orderByRatingDsd() {\n    this.isOrder = 'null';\n    this.isRating = 'Asc';\n    this.restaurants$.subscribe(data => {\n      data.forEach(element => {\n        element.name = element.name\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '');\n      });\n      const dataOrderByName = data.sort(function(a, b) {\n        return b.rating > a.rating ? 1 : a.rating > b.rating ? -1 : 0;\n      });\n      this.restaurants$ = from([dataOrderByName]);\n    });\n  }\n  getLocation(item){\n    this.navCtrl.push(ListPage,item);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { ViewChild } from '@angular/core';\nimport {} from '@types/googlemaps';\nimport { RestaurantsInfo } from '../../models/restaurants-info';\n// declare var google;\n@Component({\n  selector: 'page-list',\n  templateUrl: 'list.html'\n})\nexport class ListPage {\n  @ViewChild('gmap') gmapElement: any;\n  map: google.maps.Map;\n  restaurant: RestaurantsInfo;\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n    this.restaurant = navParams.data;\n  }\n  ionViewDidLoad() {\n    const myLatLng = new google.maps.LatLng(\n      this.restaurant.address.location.lat,\n      this.restaurant.address.location.lng\n    );\n    var mapProp = {\n      center: new google.maps.LatLng(\n        this.restaurant.address.location.lat,\n        this.restaurant.address.location.lng\n      ),\n      zoom: 15,\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    };\n    this.map = new google.maps.Map(this.gmapElement.nativeElement, mapProp);\n    google.maps.event.addListenerOnce(this.map, 'idle', () => {\n      let marker = new google.maps.Marker({\n        position: myLatLng,\n        map: this.map,\n        title: 'Hello World!'\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\n// http module\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport { ListPage } from '../pages/list/list';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { RestaurantsDataProvider } from '../providers/restaurants-data/restaurants-data';\nimport { Bonus2Page } from '../pages/bonus2/bonus2';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    ListPage,\n    Bonus2Page\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    HttpClientModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    ListPage,\n    Bonus2Page\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    RestaurantsDataProvider\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Nav, Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\nimport { ListPage } from '../pages/list/list';\nimport { Bonus2Page } from '../pages/bonus2/bonus2';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage: any = HomePage;\n\n  pages: Array<{title: string, component: any}>;\n\n  constructor(public platform: Platform, public statusBar: StatusBar, public splashScreen: SplashScreen) {\n    this.initializeApp();\n\n    // used for an example of ngFor and navigation\n    this.pages = [\n      { title: 'Home', component: HomePage },\n      { title: 'Bonus2', component: Bonus2Page }\n    ];\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n    });\n  }\n\n  openPage(page) {\n    // Reset the content nav to have just this page\n    // we wouldn't want the back button to show in this scenario\n    this.nav.setRoot(page.component);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { RestaurantsInfo } from './../../models/restaurants-info';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\n\n/*\n  Generated class for the RestaurantsDataProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class RestaurantsDataProvider {\nURL_INFO = 'https://s3-us-west-2.amazonaws.com/lgoveabucket/data_melp.json';\n  constructor(public http: HttpClient) {\n  }\n  getData(): Observable<RestaurantsInfo[]> {\n    return this.http.get<RestaurantsInfo[]>(this.URL_INFO);\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/restaurants-data/restaurants-data.ts"]}